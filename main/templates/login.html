{% extends "base.html" %}
{% set active_page = "login" %}

{% block js_imports %}
	<script src="/static/js/sha256.js"></script>
	<script>
	$(document).ready(function() {
		$("[name=login]").submit(function() {
			$("[name=login] #pwd_secret").val(Sha256.hash($("#login_password").val()));
		});
		$("[name=register]").submit(function() {
			$("[name=register] #pwd_secret").val(Sha256.hash($("#reg_password").val()));
			$("[name=register] #pwd2_secret").val(Sha256.hash($("#reg_password_repeat").val()));
		});
	});
</script>
{% endblock %}
{% block content %}
	<div class="row">
		<div class="col-md-6" id="login">
			<div class="header">
				<h1>Login</h1>
			</div>
			<form role="form" action="{{ url_for('login') + '/login' }}" method="post" name="login">
				{{ login.hidden_tag() }}
				<div class="form-group">
					{{ login.email.label(class="control-label col-sm-4") }}
					<div class="col-sm-8">{{ login.email(class="form-control") }}</div>
					<span class="help-block">
						{% if login.email.errors %}{% for error in login.email.errors %}{{error}}{% endfor %}{% endif %}
					</span>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-4" for="login_password">Enter password:</label>
					<div class="col-sm-8"><input class="form-control" id="login_password" name="login_password" type="password" value=""></div>
					<span class="help-block">
						{% if login.pwd_hash.errors %}{% for error in login.pwd_hash.errors %}{{error}}{% endfor %}{% endif %}
					</span>
				</div>
				<div class="form-group">
					<input class="btn btn-primary" id="login_submit" type="submit" value="Log in">
				</div>
			</form>
		</div>
		<div class="col-md-6" id="registration">
			<div class="header">
				<h1>Register</h1>
			</div>
			<form role="form" action="{{ url_for('login') + '/register' }}" method="post" name="register">
			{{ reg.hidden_tag() }}
				<div class="form-group">
					{{ reg.email.label(class="control-label col-sm-4") }}
					<div class="col-sm-8">{{ reg.email(class="form-control") }}</div>
					<span class="help-block">
						{% if reg.email.errors %}{% for error in reg.email.errors %}{{error}}{% endfor %}{% endif %}
					</span>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-4" for="reg_password">Enter password</label>
					<div class="col-sm-8"><input class="form-control" id="reg_password" name="reg_password" type="password"></div>
					<span class="help-block">
						{% if reg.pwd_hash.errors %}{% for error in reg.pwd_hash.errors %}{{error}}{% endfor %}{% endif %}
					</span>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-4" for="reg_password_repeat">Re-enter password:</label>
					<div class="col-sm-8"><input class="form-control" id="reg_password_repeat" name="reg_password_repeat" type="password"></div>
					<span class="help-block">
						{% if reg.pwd2_hash.errors %}{% for error in reg.pwd2_hash.errors %}{{error}}{% endfor %}{% endif %}
					</span>
				</div>
				<div class="form-group">
					{{ reg.name.label(class="control-label col-sm-4") }}
					<div class="col-sm-8">{{ reg.name(class="form-control") }}</div>
					<span class="help-block">
						{% if reg.name.errors %}{% for error in reg.name.errors %}{{error}}{% endfor %}{% endif %}
					</span>
				</div>
				<div class="form-group">
					<input class="btn btn-default" id="reg_submit" type="submit" value="Register">
				</div>
			</form>
		</div>
	</div>
{% endblock %}